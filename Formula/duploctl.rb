# generated by duploctl pipeline, do no edit
class Duploctl < Formula

  desc "Command-line tools for Duplocloud"
  homepage "https://github.com/duplocloud/duploctl"
  version "0.2.15"
  license "MIT"
  base_url = "#{homepage}/releases/download/v#{version}"

  option "with-pip", "Use Brew PIP to install duploctl"

  if build.with? "pip"
    include Language::Python::Virtualenv
    url "#{base_url}/duplocloud-client-#{version}.tar.gz"
    sha256 "007368deb03596fab9067290594156425a86e975ce533bae07bf1ac7199e29ae"
    depends_on "python@3.12"
    
    resource "requests" do
      url "https://files.pythonhosted.org/packages/9d/be/10918a2eac4ae9f02f6cfe6414b7a155ccd8f7f9d4380d62fd5b955065c3/requests-2.31.0.tar.gz"
      sha256 "942c5a758f98d790eaed1a29cb6eefc7ffb0d1cf7af05c3d2791656dbd6ad1e1"
    end
  
    resource "pyyaml" do
      url "https://files.pythonhosted.org/packages/cd/e5/af35f7ea75cf72f2cd079c95ee16797de7cd71f29ea7c68ae5ce7be1eda0/PyYAML-6.0.1.tar.gz"
      sha256 "bfdf460b1736c775f2ba9f6a92bca30bc2095067b8a9d77876d1fad6cc3b4a43"
    end
  
    resource "cachetools" do
      url "https://files.pythonhosted.org/packages/b3/4d/27a3e6dd09011649ad5210bdf963765bc8fa81a0827a4fc01bafd2705c5b/cachetools-5.3.3.tar.gz"
      sha256 "ba29e2dfa0b8b556606f097407ed1aa62080ee108ab0dc5ec9d6a723a007d105"
    end
  
    resource "jmespath" do
      url "https://files.pythonhosted.org/packages/00/2a/e867e8531cf3e36b41201936b7fa7ba7b5702dbef42922193f05c8976cd6/jmespath-1.0.1.tar.gz"
      sha256 "90261b206d6defd58fdd5e85f478bf633a2901798906be2ad389150c5c60edbe"
    end
  
    def install
      virtualenv_install_with_resources
    end
  else
    on_macos do
      url "#{base_url}/duploctl-#{version}-darwin-amd64.tar.gz"
      sha256 "9bcda220d5209408981b7f9a085ac88b320dc5ddc9ad84b0f7ac63e6e86ccb05"
    end
  
    on_linux do
      url "#{base_url}/duploctl-#{version}-linux-amd64.tar.gz"
      sha256 "2d355981b4fe47c3e69d2330ee829ca55cc2f96cbaf4b6bb396345398db25e10"
    end
  
    def install
      bin.install "duploctl"
    end
  end

  test do
    system "duploctl --version"
  end
end
